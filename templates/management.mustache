<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Profile Management</title>

    <!--<link rel="stylesheet" type="text/css" href="stylesheets/resetHome.css" />-->
    <!--<link rel="stylesheet" type="text/css" href="stylesheets/home.css" />-->
    <!--<link rel="stylesheet" type="text/css" href="stylesheets/style-responsive.css" />-->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</head>

<body>

<div class="container">

    <div class="row">
        <div class="col">
            Select a term:
            <select id="school-term">
            </select>
        </div>
        <div class="col">
            <input type='text' id='search-input'>
            <input type='button' id='search-button' value='Search'>
        </div>
        <div class="col">

        </div>
    </div>


    <div class="row justify-content-start">
    </div>


    <div class="row">
        <div class="col-lg-8">
            <table class="table table-sm" id="course-list">
                <tr id="#header">
                    <th>Subject</th>
                    <th>Course Number</th>
                    <th>Course Name</th>
                    <th>Course Instructor</th>
                    <th>Action</th>
                </tr>
            </table>
        </div>
        <div class="col-lg-4">

        </div>
    </div>




    <section>

        <form id="creation-form" method="POST">
            <div class="row">
                <div class="col-md-3">
                    <label>Subject</label>
                    <input type="text" class="form-control" id="fminput1" placeholder="Example input" value="CS" name="Subject">
                    <label>Course Number</label>
                    <input type="text" class="form-control" id="fminput2" placeholder="Another input" name="ClassNumber">

                </div>
                <div class="col-md-3">
                    <label>Class Name</label>
                    <input type="text" class="form-control" id="fminput3" placeholder="Example input" name="ClassName">
                    <label>Instructor</label>
                    <input type="text" class="form-control" id="fminput4" placeholder="Example input" name="Instructor">
                </div>
                <div class="col-md-2">
                    <label>Section Number</label>
                    <input type="text" class="form-control" id="fminput5" placeholder="Example input" name="SectionNumber">

                </div>
            </div>
            <div class="row">
                <div class="col-md-3">
                    <button type="submit" class="btn btn-primary" id="subbtn">Create Class</button>
                </div>
            </div>
        </form>

    </section>



    <section>
        Classes to add:
        <ul id="cart">
            <li>1</li>
            <li>2</li>
        </ul>
    </section>










    <!-- Contact-->

    <section class="contact" id="contact">
        <h1>Contact</h1>
        <hr/>

        <div class="content">

            <div class="contact-text">

                Please DON'T use
                the following e-mail address<br/><br/>

                e-mail: <strong>classTranscribe@gmail.com</strong>

            </div>


        </div>

    </section>


    <section class="footer">

        <div class="margin">

            <div class="menu-footer">

                <a href="#home">Home</a>
                <a href="https://www.facebook.com/classtranscribe">Facebook</a>

            </div>

            <div class="copyright">Â© 2016. All Rights Reserved UIUC</div>

        </div>

    </section>

</div>





<!--<form action = "/manage-classes/gettest" method = "post" id="testdataform">-->
    <!--<input type="text" name="g1" value="Upvote" />-->
    <!--<button type="submit" name="g2" id="testdatabutton" class="button" value="testvalue">testing data</button>-->
<!--</form>-->

<!--bootstrap grid test -->
<div class="container">
    <div class="row">
        <div class="col-md-12">
            <div class="row">
                <div class="col-md-2">
                    <a href="">About</a>
                </div>
                <div class="col-md-6">
                    <a href="">Column2</a>
                    <button class="whyisclassnotworking">1234</button>
                    <button class="whyisclassnotworking">same1234</button>
                    <button class="rmbn">placeholder</button>
                </div>
                <div class="col-md-4">
                    <a href="#myModal1" data-toggle="modal">SHARE</a>
                </div>
            </div>
        </div>
    </div>
</div>












<!-- Scripts -->

<!--<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script> &lt;!&ndash; jQuery &ndash;&gt;-->
<script src="/javascripts/libraries/jquery.parallax.js"></script> <!-- jQuery Parallax -->
<script src="/javascripts/libraries/jquery.nicescroll.js"></script> <!-- jQuery NiceScroll -->
<script src="/javascripts/libraries/jquery.sticky.js"></script> <!-- jQuery Stick Menu -->
<!--<script src="/javascripts/libraries/homeScript.js"></script> &lt;!&ndash; All script &ndash;&gt;-->
<script>
    $( document ).ready(function() {
    });
    // populate school term options
    var schoolTermsList="{{termlist}}".split(",");
    var termSelection = document.getElementById("school-term");
    schoolTermsList.forEach(function(element) {
        var option = document.createElement("option");
        option.text = element;
        option.value = element;
        termSelection.add(option);
    });
    // get information for the default selection
    getTermInfo();

    // generate html for the selected term
    function getTermInfo(){
        var term = document.getElementById("school-term");
        var selectedTerm = $("#school-term").val();
        console.log(selectedTerm);
        $.ajax({
            url : "/manage-classes/getterminfo",
            type: "GET",
            data: {"term":selectedTerm},
            success: function (data) {
                console.log(data);
                var html = '';
                html+='<tr id="#header">'+
                        '<th>Subject</th>'+
                        '<th>Course Number</th>'+
                        '<th>Course Name</th>'+
                        '<th>Course Instructor</th>'+
                        '<th>Action</th>'+
                        '</tr>';
                data.forEach(function (c) {
                    html += '<tr>';
                    html += '<td>' + c["ClassName"] + '</td>';
                    html += '<td>' + c["ClassNumber"] + '</td>';
                    html += '<td>' + c["ClassName"] + '</td>';
                    html += '<td>' + c["Instructor"] + '</td>';
                    html += '<td>' + '<button class="rmbn\">action</button>' + '</td>';
                    html += '</tr>';
                    //append created html to the table body:
                    //$('#course-list').append(html);
                });
                $("#course-list").html(html);
            },
            error: function (jXHR, textStatus, errorThrown) {
                //alert(errorThrown);
            }
        });
    }

    // refresh course list on change
    $( "#school-term" ).change(function() {
        getTermInfo();
    });


    // create new course
    $("#creation-form").submit(function(e) {
        //alert("submit clicked");
        //alert( JSON.stringify($('#creation-form :input'), null, 4));
        //alert(JSON.stringify($('#creation-form').serializeArray(), null, 4));

        e.preventDefault();
        var term = document.getElementById("school-term");
        var newCourse = [];
        $('#creation-form').serializeArray().forEach(function (elem) {
            newCourse.push(elem["value"]);
            //alert(JSON.stringify(elem["value"], null, 4));
        });


        if($("#school-term").val()!='') {
            //alert($("#creation-form").serialize());
            $.ajax({
                url : "/manage-classes/newclass/",
                type: "POST",
                //data: {"data":$("#creation-form").serializeArray(),"term":$("#school-term").val()},
                data: $("#creation-form").serialize()+"&Term="+$( "#school-term" ).val(),
                success: function (data) {
                    console.log(data);
                },
                error: function (jXHR, textStatus, errorThrown) {
                    alert(errorThrown);
                }
            });
            console.log(newCourse);
            // change list display
            $("#course-list").append('<tr>' +
                    '<td>' + newCourse["Subject"] + '</td>' +
                    '<td>' + newCourse[1] + '</td>' +
                    '<td>' + newCourse[2] + '</td>' +
                    '<td>' + newCourse[3] + '</td>' +
                    '<td>' + '<button class="testremovebutton">action</button>' + '</td>' +
                    '</tr>');
        }
    });


    $( "#testdatabutton" ).click(function() {
        //console.log(x);
        var html = "<li>"+"testli"+"</li>";
        $('#cart').append(html);
    });

    console.log("testing remove button");
    $(".rmbn").on('click', ".rmbn",function (e) {
        console.log(e);
       console.log(this);
       console.log("remove button clicked");
    });

    $(".whyisclassnotworking").click(function (e) {
        console.log(e);
        console.log(this);
    });

//
//    $("#testdataform").submit(function(e){
//        e.preventDefault();
//        //$.ajax({});
//        console.log($("#testdataform").serializeArray());
//        $.ajax({
//            url : $(this).attr('action'),
//            type: "POST",
//            data: $("#testdataform").serialize(),
//            success: function (data) {
//                console.log(data);
//                x = data;
//            },
//            error: function (jXHR, textStatus, errorThrown) {
//                alert(errorThrown);
//            }
//        });
//    });



</script>

</body>

</html>



