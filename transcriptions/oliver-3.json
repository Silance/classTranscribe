[{"start":"0:00","end":"0:06","text":"welcome, ok so lets start creating some files"},{"start":"0:06","end":"0:09","text":"for that we can use the system call open()"},{"start":"0:09","end":"0:20","text":"and for open we need to say whether we want to append to an existing file, create a brand new file, and we need to give it a filename"},{"start":"0:20","end":"0:25","text":"for example we might have a file named \"output.txt\""},{"start":"0:25","end":"0:28","text":"so the open() call"},{"start":"0:28","end":"0:33","text":"takes 2 or 3 arguements. the second arguement will be exactly what we want to do"},{"start":"0:33","end":"0:42","text":"so in this case we want to say create a brand new file and truncate it back to 0 if it doesn't exist"},{"start":"0:42","end":"1:00","text":"if we're creating a new file we'd better say who can read this file, and who can write and execute. so w'ere going to have to say something about the mode flag"},{"start":"1:00","end":"1:06","text":"finally this call is going to give us back an integer, a file descriptor"},{"start":"1:06","end":"1:09","text":"just like we've seen so far with file number 1 and file number 2"},{"start":"1:09","end":"1:11","text":"so lets store that inside a litler variable"},{"start":"1:11","end":"1:18","text":"ok, so now I better actually find out what the correct syntax is"},{"start":"1:18","end":"1:21","text":"and the correct arguments are in order to create a file"},{"start":"1:21","end":"1:24","text":"so lets go and look that up"},{"start":"1:24","end":"1:26","text":"and that we'll find inside the manual"},{"start":"1:26","end":"1:43","text":"and if, for example, I type man open on a command line on a real linux machine, it doesn't quite work on my little virtual machine"},{"start":"1:43","end":"1:48","text":"but heres a linux manual page I found on the web for the open()"},{"start":"1:48","end":"1:59","text":"and you'll see the function signature here, where we're going to pass in an int for the flags and the mode type"},{"start":"1:59","end":"2:03","text":"so now I'm going to look up the flags I need to open and create a new file"},{"start":"2:03","end":"2:07","text":"I don't want to do append, I want to use create"},{"start":"2:07","end":"2:12","text":"and I want to truncate it as well"},{"start":"2:12","end":"2:29","text":"so lets include \"O_CREAT\" and I'm going to bitwise or it with the flag to truncate \"O_TRUNC\""},{"start":"2:29","end":"2:37","text":"alright, uh and I want to say when I open it"},{"start":"2:37","end":"2:48","text":"I'm going to open it for say reading and writing"},{"start":"2:48","end":"2:44","text":"so let's grab that as well"},{"start":"2:44","end":"2:48","text":"ok so that's the first thing and now we need to do the mode"},{"start":"2:48","end":"2:53","text":"ok lets write this as a variable"},{"start":"2:53","end":"3:02","text":"there's actually a typedef, it's essentially an integer but it's wrapped up in this \"mode_t\" type"},{"start":"3:02","end":"3:13","text":"we'll say that with our file we want to be fairly private and only the owner of the file can access it"},{"start":"3:13","end":"3:16","text":"so let's go back up and find those flags"},{"start":"3:16","end":"3:17","text":"here we go"},{"start":"3:17","end":"3:27","text":"right, so we'll say that the user has read and write permission"},{"start":"3:27","end":"3:36","text":"we'll copy the read one \"S_IRUSR\""},{"start":"3:36","end":"3:40","text":"and we'll have write permission as well"},{"start":"3:40","end":"3:45","text":"but no one else in my linux system will be able to read it and write it"},{"start":"3:45","end":"3:48","text":"so that's the permissions we want"},{"start":"3:48","end":"3:50","text":"so what can we do with this"},{"start":"3:50","end":"3:55","text":"let's write something out to this file"},{"start":"3:55","end":"4:06","text":"um, we will write a little message \"Great!\" and a new line"},{"start":"4:06","end":"4:09","text":"so how many characters is that"},{"start":"4:09","end":"4:13","text":"1 2 3 4 5 6 and a new line, so that's 7 characters"},{"start":"4:13","end":"4:18","text":"and then we will close this file descriptor"},{"start":"4:18","end":"4:21","text":"meaning we don't want to use this descriptor anymore"},{"start":"4:21","end":"4:27","text":"and that will ensure that all the bytes that we sent to the file"},{"start":"4:27","end":"4:30","text":"stream have been saved"},{"start":"4:30","end":"4:32","text":"ok, so we're not doing any error checking right now"},{"start":"4:32","end":"4:39","text":"we just tried to write the smallest possible program to create a file and send something to it"},{"start":"4:39","end":"4:43","text":"so lets run this and see what we get"},{"start":"4:43","end":"4:49","text":"and we'll run into an error which is that we haven't defined what this mode_t is"},{"start":"4:49","end":"4:54","text":"what we forgot to do was the include statements"},{"start":"4:54","end":"5:02","text":"the good news is that the man pages tell us which includes we need to put at the top of our program"},{"start":"5:02","end":"5:03","text":"so lets grab those"},{"start":"5:03","end":"5:06","text":"and insert them in here"},{"start":"5:06","end":"5:10","text":"just get the formatting correct"},{"start":"5:10","end":"5:13","text":"and run it again"},{"start":"5:13","end":"5:27","text":"right, so our program ran, it's still printing \"hello\" to std out and \".\" to std err"},{"start":"5:27","end":"5:31","text":"but hopefully it's also creating another file"},{"start":"5:31","end":"5:34","text":"i can do LS and see if anything exists"},{"start":"5:34","end":"5:37","text":"say starting with out"},{"start":"5:37","end":"5:39","text":"yes, we've got output.txt"},{"start":"5:39","end":"5:43","text":"now lets look at the contents of that file"},{"start":"5:43","end":"5:45","text":"and it says great! fantastic"},{"start":"5:45","end":"5:47","text":"now it's your turn to play"},{"start":"5:47","end":"5:50","text":"create a file and see if you can "},{"start":"5:50","end":"5:52","text":"send some bytes to that file"},{"start":"5:52","end":"5:55","text":"so you'll be using open(), write() and close()"},{"start":"5:55","end":"5:55","text":"bye"}]