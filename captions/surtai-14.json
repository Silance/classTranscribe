[{"text":"Hi, welcome!","width":73},{"text":"let's talk about creating more complicated data types in C","width":192},{"text":"so far, we've talked about integer and character pointers","width":273},{"text":"what if we wanted to make something more complicated like a linked list?","width":196},{"text":"for that, we will use a struct","width":193},{"text":"so, let's say we've got a struct and we'll say my struct I'll call it say Link","width":453},{"text":"and what should we have inside this?","width":227},{"text":"well, we've have a value to store and we'll need a pointer to the next link","width":267},{"text":"we'll need to know where the next link is in memory","width":145},{"text":"so, we can say struct Link and it's a pointer to that","width":277},{"text":"so, don't forget the asterisk","width":137},{"text":"so that's our little struct here. a semicolon is required at the end","width":243},{"text":"but it's kind of painful to keep saying \"struct Link\" every time I want to refer to this type","width":387},{"text":"so I can have a link here called \"one\" for example","width":257},{"text":"so quite often, we can use, or you'll find that people use \"typedef\"","width":313},{"text":"to say \"here's an alias\" and I can use typedef with any kind of type","width":392},{"text":"I can even use it with integers","width":156},{"text":"for example, I can say typedef number","width":176},{"text":"now I can say \"number x\" instead of \"int x\"","width":327},{"text":"but today we're going to use typedef for our link","width":240},{"text":"so we'll say instead of having to write struct Link, I'll call this my link type","width":373},{"text":"so now I've got my link_t, I can make a link","width":284},{"text":"here's one","width":63},{"text":"and if I declare variables like this, outside of my functions, then they live forever","width":525},{"text":"and, let me write my main method here","width":297},{"text":"so, my link called \"one\" and my value live forever","width":478},{"text":"and in fact, they're initialized","width":149},{"text":"so their bitwise pattern is just all zeros","width":167},{"text":"so in other words, my value is zero and the link \"one\" will have a value of zero and it's next pointer will have a value of zero as well","width":618},{"text":"if we wanted to change that, then we could say one.value equals fourty two","width":480},{"text":"and one.next equals well, where should we put it?","width":237},{"text":"well where should we send it next?","width":98},{"text":"we could say \"NULL\" if we wish to use NULL, actually we have to #include","width":452},{"text":"to have NULL defined","width":257},{"text":"and now our Link says \"I'm the last thing. there's no one after me\"","width":341},{"text":"if we wanted to be particularly crazy, we can make the next pointer point to the very same link","width":454},{"text":"we do that by saying \"one\" except we don't want \"one\" we want the address of \"one\"","width":397},{"text":"we need a pointer to \"one\"","width":63},{"text":"so how do I do that? I use ampersand to say \"give me the address\" of this","width":281},{"text":"so that gives me a pointer to a link","width":121},{"text":"well thats great if we only need one link","width":114},{"text":"but that's not much of a linked list","width":150},{"text":"let's actually work out then how we can actually make a whole load of links","width":292},{"text":"for that, we'll use some heap memory","width":148},{"text":"and I'm going to use malloc which is also declared inside stdlib.h","width":268},{"text":"so, I need some memory","width":188},{"text":"how many bytes do I need?","width":63},{"text":"for that, I can say: \"give me the size of my link structure\"","width":258},{"text":"in other words, give me the size of link_t","width":143},{"text":"be careful you don't put an asterisk here otherwise, you'll only be reserving enough bytes for a pointer","width":362},{"text":"in other words, 4 bytes or so","width":109},{"text":"that's not enough for what we need","width":63},{"text":"we need the size of our whole struct","width":197},{"text":"that gives me back a pointer and I actually want to cast it so that it's type pointer to a link_t","width":580},{"text":"so I can now store that inside a variable","width":227},{"text":"and I can have it as my first pointer","width":209},{"text":"so, malloc does not initialize the actual memory. it just simply reserves it for us","width":467},{"text":"just allocates it for us.","width":63},{"text":"we better make sure that our Link is properly initialized","width":184},{"text":"for our first Link, I want to set its value to something","width":418},{"text":"and I need to set its \"next\" pointer to something","width":225},{"text":"so for example, I can set it to NULL","width":63},{"text":"or if I, oops, let me change that to put a one","width":252},{"text":"or if I wanted to make it point to itself, I can say \"ptr1\"","width":290},{"text":"if I had two links, let's do that","width":427},{"text":"then I can again set up the values. be very careful copy and pasting code that you've actually edited it correctly","width":550},{"text":"I can now make my first link ptr1 its next point to next ptr","width":407},{"text":"and the next link, its next pointer can go nowhere","width":373},{"text":"so, there's my simple linked list","width":279},{"text":"more complicated links might have a previous pointer as well","width":312},{"text":"so you can navigate both in the forwards and backwards direction throughout the linked list","width":439},{"text":"okay, so, let's now finally compile this and check that it works","width":354},{"text":"our program compiles correctly, but to be a well-behaved program, really we should free up the memory as well","width":798},{"text":"so don't forget for every malloc you do, we should responsible for freeing up that memory once and once only","width":599},{"text":"so free(ptr1) and free(ptr2)","width":254},{"text":"also, a more robust version of this program would check that malloc actually succeeded","width":424},{"text":"that we actually really got the bytes","width":63},{"text":"that would be something important to do if your program ran for a very long time","width":301},{"text":"or needed very large unknown amounts of memory","width":391},{"text":"so that's how we make linked lists in C","width":184},{"text":"now it's time for you to play. bye!","width":193}]