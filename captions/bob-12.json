[{"text":"welcome so let's talk about some options other than automatic variables","width":254},{"text":"so here's a little problem i've got so far","width":186},{"text":"in my main method i want to print out the current time ","width":214},{"text":"and i'm going to write my function called currenttime that returns a new string array","width":487},{"text":"i already know that i cannot make an array in here to hold the result","width":385},{"text":"say with two hundred and fifty because when I go to return from this function","width":315},{"text":"the array variable won't be pointing to memory that is valid any longer","width":385},{"text":"so here is two options","width":124},{"text":"i could make my array static","width":192},{"text":"so how do i do that","width":127},{"text":"just by the keyword static","width":63},{"text":"so for example if i were to just say okay i've got myself a static array out here outside of that method","width":445},{"text":"then my array lives forever or at least for the length of my process","width":377},{"text":"so that gets rid of the problem of having some space","width":260},{"text":"i cheated i said look just give me some space for the lifetime of my program here ","width":316},{"text":"so that's what static does","width":186},{"text":"i can also put this inside the function","width":195},{"text":"that doesn't change the lifetime of the variable","width":125},{"text":"it just changes the scoping","width":125},{"text":"so as always that means simply that now the variable name array can only be connected to that piece of memory inside my little method","width":769},{"text":"so it's just changing how the actual name of the variable is bound to the memory","width":317},{"text":"so that's one method","width":192},{"text":"but instead i want to talk about a completely different way which is to use malloc","width":379},{"text":"so you're going to come across malloc calloc and realloc","width":703},{"text":"today let's talk about malloc ","width":124},{"text":"which essentially means give me some bytes","width":126},{"text":"and i can say how many bytes i need","width":256},{"text":"and that storage space is found inside the program's heap","width":319},{"text":"so for example if I want one hundred and twenty eight bytes I would say malloc one hundred and twenty eight","width":252},{"text":"so this is going to give me a pointer to the very first byte","width":192},{"text":"so let's store that inside my little character pointer here","width":317},{"text":"and i'll say there is my result","width":125},{"text":"it is possible that malloc fails","width":449},{"text":"if it is unable to give me one hundred and twenty eight bytes it would give me back an invalid pointer pointed to null or pointed to nothing","width":381},{"text":"so i could say look if result is zero or null or if i wanted to be really terse I could say if not result","width":684},{"text":"in other words result is null","width":79},{"text":"then just return that null pointer","width":187},{"text":"i am not going to try and use it","width":130},{"text":"it's not a valid pointer","width":63},{"text":"otherwise let's put some things inside this and I could turn the current time and store it inside that array","width":700},{"text":"so let me use a function called strcpy to put in the current time which is two fifty one pm","width":572},{"text":"#include <string.h> Â let's run this","width":704},{"text":"and my program calls currenttime creates some memory and then returns it","width":577},{"text":"this is fantastic right","width":63},{"text":"i've now got a way to make long lived pieces of memory and put data inside them","width":314},{"text":"but with great opportunity comes great responsibility here ","width":253},{"text":"so what we should do is let our programs is with every malloc we should at some point free up that memory to say hey i've finished with it","width":640},{"text":"so the correct way to do this is to keep a pointer around","width":191},{"text":"so let's have a pointer down here","width":188},{"text":"and when i finished using that memory","width":254},{"text":"i can free it","width":122},{"text":"to say hey this memory is no longer being used","width":128},{"text":"this block of memory of one hundred and twenty eight bytes is no longer being used","width":254},{"text":"please put it back into the heap and maybe we will reuse that memory again for a future malloc","width":575},{"text":"so good programs will have one free for every malloc ","width":319},{"text":"in the next video i'll talk about some of the mistakes that we can make with heap allocation","width":381},{"text":"but now it's time for you to play with malloc ","width":191},{"text":"bye","width":63}]